{"ast":null,"code":"var r = require(\"react-hook-form\"),\n    e = function (e, i, t) {\n  if (e && \"reportValidity\" in e) {\n    var a = r.get(t, i);\n    e.setCustomValidity(a && a.message || \"\"), e.reportValidity();\n  }\n},\n    i = function (r, i) {\n  var t = function (t) {\n    var a = i.fields[t];\n    a && a.ref && \"reportValidity\" in a.ref ? e(a.ref, t, r) : a.refs && a.refs.forEach(function (i) {\n      return e(i, t, r);\n    });\n  };\n\n  for (var a in i.fields) t(a);\n};\n\nexports.toNestError = function (e, t) {\n  t.shouldUseNativeValidation && i(e, t);\n  var a = {};\n\n  for (var o in e) {\n    var f = r.get(t.fields, o);\n    r.set(a, o, Object.assign(e[o], {\n      ref: f && f.ref\n    }));\n  }\n\n  return a;\n}, exports.validateFieldsNatively = i;","map":{"version":3,"sources":["../src/validateFieldsNatively.ts","../src/toNestError.ts"],"names":["setCustomValidity","ref","fieldPath","errors","error","get","message","reportValidity","validateFieldsNatively","options","fields","field","refs","forEach","shouldUseNativeValidation","fieldErrors","path","set","Object","assign"],"mappings":";IAIMA,CAAAA,GAAoB,UAACC,CAAD,EAAWC,CAAX,EAA8BC,CAA9B,EAA8BA;AACtD,MAAIF,CAAAA,IAAO,oBAAoBA,CAA/B,EAAoC;AAClC,QAAMG,CAAAA,GAAQC,CAAAA,CAAAA,GAAAA,CAAIF,CAAJE,EAAYH,CAAZG,CAAd;AACAJ,IAAAA,CAAAA,CAAID,iBAAJC,CAAuBG,CAAAA,IAASA,CAAAA,CAAME,OAAfF,IAA2B,EAAlDH,GAEAA,CAAAA,CAAIM,cAAJN,EAFAA;AAEIM;AAAAA,C;IAKKC,CAAAA,GAAyB,UACpCL,CADoC,EAEpCM,CAFoC,EAEpCA;AAAAA,MAAAA,CAAAA,GAAAA,UAIWP,CAJXO,EAIWP;AACT,QAAMS,CAAAA,GAAQF,CAAAA,CAAQC,MAARD,CAAeP,CAAfO,CAAd;AACIE,IAAAA,CAAAA,IAASA,CAAAA,CAAMV,GAAfU,IAAsB,oBAAoBA,CAAAA,CAAMV,GAAhDU,GACFX,CAAAA,CAAkBW,CAAAA,CAAMV,GAAxBD,EAA6BE,CAA7BF,EAAwCG,CAAxCH,CADEW,GAEOA,CAAAA,CAAMC,IAAND,IACTA,CAAAA,CAAMC,IAAND,CAAWE,OAAXF,CAAmB,UAACV,CAAD,EAACA;AAAAA,aAA0BD,CAAAA,CAAkBC,CAAlBD,EAAuBE,CAAvBF,EAAkCG,CAAlCH,CAA1BC;AAA4DE,KAAhFQ,CAHEA;AAG8ER,GATpFM;;AAIA,OAAK,IAAMP,CAAX,IAAwBO,CAAAA,CAAQC,MAAhC,EAAgCA,CAAAA,CAArBR,CAAqBQ,CAAAA;AAArBR,C;;AAAAA,OAAAA,CAAAA,WAAAA,GCVc,UACzBC,CADyB,EAEzBM,CAFyB,EAEzBA;AAEAA,EAAAA,CAAAA,CAAQK,yBAARL,IAAqCD,CAAAA,CAAuBL,CAAvBK,EAA+BC,CAA/BD,CAArCC;AAEA,MAAMM,CAAAA,GAAc,EAApB;;AACA,OAAK,IAAMC,CAAX,IAAmBb,CAAnB,EAA2B;AACzB,QAAMQ,CAAAA,GAAQN,CAAAA,CAAAA,GAAAA,CAAII,CAAAA,CAAQC,MAAZL,EAAoBW,CAApBX,CAAd;AAEAY,IAAAA,CAAAA,CAAAA,GAAAA,CACEF,CADFE,EAEED,CAFFC,EAGEC,MAAAA,CAAOC,MAAPD,CAAcf,CAAAA,CAAOa,CAAPb,CAAde,EAA4B;AAAEjB,MAAAA,GAAAA,EAAKU,CAAAA,IAASA,CAAAA,CAAMV;AAAtB,KAA5BiB,CAHFD;AAOF;;AAAA,SAAOF,CAAP;AAAOA,CDPIb,ECOJa,OAAAA,CAAAA,sBAAAA,GAAAA,CDPIb","sourcesContent":["import {\n  get, FieldError, ResolverOptions, Ref\n} from 'react-hook-form';\n\nconst setCustomValidity = (ref: Ref, fieldPath: string, errors: Record<string, FieldError>) => {\n  if (ref && 'reportValidity' in ref) {\n    const error = get(errors, fieldPath) as FieldError | undefined;\n    ref.setCustomValidity((error && error.message) || '');\n\n    ref.reportValidity();\n  }\n};\n\n// Native validation (web only)\nexport const validateFieldsNatively = <TFieldValues>(\n  errors: Record<string, FieldError>,\n  options: ResolverOptions<TFieldValues>,\n): void => {\n\n\n  for (const fieldPath in options.fields) {\n    const field = options.fields[fieldPath];\n    if (field && field.ref && 'reportValidity' in field.ref) {\n      setCustomValidity(field.ref, fieldPath, errors)\n    } else if (field.refs) {\n      field.refs.forEach((ref: HTMLInputElement) => setCustomValidity(ref, fieldPath, errors))\n    }\n  }\n};\n","import {\n  set,\n  get,\n  FieldError,\n  FieldErrors,\n  Field,\n  ResolverOptions,\n} from 'react-hook-form';\nimport { validateFieldsNatively } from './validateFieldsNatively';\n\nexport const toNestError = <TFieldValues>(\n  errors: Record<string, FieldError>,\n  options: ResolverOptions<TFieldValues>,\n): FieldErrors<TFieldValues> => {\n  options.shouldUseNativeValidation && validateFieldsNatively(errors, options);\n\n  const fieldErrors = {} as FieldErrors<TFieldValues>;\n  for (const path in errors) {\n    const field = get(options.fields, path) as Field['_f'] | undefined;\n\n    set(\n      fieldErrors,\n      path,\n      Object.assign(errors[path], { ref: field && field.ref }),\n    );\n  }\n\n  return fieldErrors;\n};\n"]},"metadata":{},"sourceType":"script"}